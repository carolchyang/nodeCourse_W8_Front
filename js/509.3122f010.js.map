{"version":3,"file":"js/509.3122f010.js","mappings":"qNACOA,MAAM,qC,mBAOPC,IAAAC,EACAF,MAAM,mB,GAGHA,MAAM,iB,GACLA,MAAM,iC,GAERG,EAAAA,EAAAA,GAA4C,QAAtCH,MAAM,sBAAqB,QAAI,G,aAuBtCA,MAAM,gB,GACJA,MAAM,mB,GAMPG,EAAAA,EAAAA,GAAkC,UAA1BC,MAAM,QAAO,QAAI,G,GACzBD,EAAAA,EAAAA,GAAiC,UAAzBC,MAAM,OAAM,QAAI,G,GADxBC,EACAC,G,GAGCN,MAAM,mB,GACJA,MAAM,8B,GAePG,EAAAA,EAAAA,GAA+B,KAA5BH,MAAM,mBAAiB,S,GAA1BO,G,WAaa,qB,oIA7ErBJ,EAAAA,EAAAA,GAmCM,MAnCN,EAmCM,CA/BIK,EAAAA,aAAaC,QAAAA,EAAAA,EAAAA,OAHrBC,EAAAA,EAAAA,IAIE,O,MAHCT,IAAKO,EAAAA,aAAaC,MACnBT,MAAM,mBAFR,wBAKAU,EAAAA,EAAAA,IAIE,MAJF,KAKAP,EAAAA,EAAAA,GAuBM,MAvBN,EAuBM,EAtBJA,EAAAA,EAAAA,GAGK,KAHL,EAGK,EAFHA,EAAAA,EAAAA,GAAoC,aAAAQ,EAAAA,EAAAA,IAA3BH,EAAAA,aAAaI,MAAI,GAC1BC,IAESL,EAAAA,aAAeM,EAAAA,QAAQC,MAAAA,EAAAA,EAAAA,OAAlCL,EAAAA,EAAAA,IAiBM,MAAAM,EAAA,CAZKC,EAAAA,WAJT,WAQAP,EAAAA,EAAAA,IAOS,U,MANPQ,KAAK,SACLlB,MAAM,iEACLmB,QAAK,yBAAUF,EAAAA,aAAaT,EAAAA,WAAU,6BAExC,aATQS,EAAAA,EAAAA,OAJTP,EAAAA,EAAAA,IAOS,U,MANPQ,KAAK,SACLlB,MAAM,+DACLmB,QAAK,yBAAUF,EAAAA,aAAaT,EAAAA,WAAU,gCAExC,aANH,oBAqBJL,EAAAA,EAAAA,GA+BM,MA/BN,EA+BM,EA9BJA,EAAAA,EAAAA,GASM,MATN,EASM,WARJA,EAAAA,EAAAA,GAOS,UANPH,MAAM,6B,qCACGQ,EAAAA,KAAIY,GACZC,SAAM,eAAEJ,EAAAA,iBAHX,cAEWT,EAAAA,WAObL,EAAAA,EAAAA,GAmBM,MAnBN,EAmBM,EAlBJA,EAAAA,EAAAA,GAiBM,MAjBN,EAiBM,WAhBJA,EAAAA,EAAAA,GAOE,SANAe,KAAK,OACLlB,MAAM,eACNsB,YAAY,OACZ,aAAW,SACX,mBAAiB,S,qCACHd,EAAAA,QAAOY,IANvB,iBAMgBZ,EAAAA,aAAAA,EAAAA,C,MAAd,OAEFL,EAAAA,EAAAA,GAOS,UANPH,MAAM,sCACNkB,KAAK,SACLK,GAAG,SACFJ,QAAK,yBAAUF,EAAAA,gBAAY,eAJ9B,SAeET,EAAAA,OAAOgB,SAAAA,EAAAA,EAAAA,OAHfC,EAAAA,EAAAA,IAIoBC,EAAA,C,MAHjBC,KAAMnB,EAAAA,MACNoB,UAAUX,EAAAA,cAFb,2CAMAQ,EAAAA,EAAAA,IAEqBI,EAAA,CAAAC,IAAAA,GAAA,CADRC,SAAO,SAAC,IAAiB,M,QADtC,I,gEAaF,GACEnB,KAAM,kBACNe,OACE,MAAO,CACLK,WAAY,GACZC,aAAc,GACdC,QAAS,GACTC,KAAM,OACNC,MAAO,KAGXC,QAAS,CAEPC,qBACE,IAAIC,EAAW,CAEbJ,KAAMK,KAAKL,KAEXD,QAASM,KAAKN,SAGhBM,KAAKC,eAAc,IAEnBC,EAAAA,EAAAA,IAAgBH,EAAUC,KAAKR,YAC5BW,MAAMC,IACLJ,KAAKJ,MAAQQ,EAAIjB,KAAKA,KACtBa,KAAKC,eAAc,MAEpBI,OAAOC,IACNN,KAAKC,eAAc,GACnBD,KAAKO,YAAY,CACfC,MAAO,SACPC,QAASH,EAAII,UAAUvB,MAAMwB,SAAW,eAKhDb,mBAAmBf,EAAI6B,GACrBZ,KAAKC,eAAc,SACbD,KAAKY,GAAY7B,GACvBiB,KAAKa,kBAEJC,EAAAA,EAAAA,IAAWC,EAAAA,EAAa,CAAC,sBACzBD,EAAAA,EAAAA,IAAWE,EAAAA,EAAW,CAAC,aAAc,eAAgB,eAE1DC,SAAU,CAERC,WACE,IAAIC,GAAM,EACV,MAAMhC,EAAOa,KAAKoB,SAASC,WAAa,GAMxC,OALAlC,EAAKmC,SAASC,IACRA,EAAKC,MAAQxB,KAAKR,aACpB2B,GAAM,MAGHA,OAENM,EAAAA,EAAAA,IAAST,EAAAA,EAAW,CAAC,aAE1BU,WAAY,CACVC,iBADU,IAEVC,mBAAkBA,EAAAA,GAEpB9B,gBAEEE,KAAKR,WAAaQ,KAAK6B,OAAOC,OAAO/C,GACrCiB,KAAKP,aAAe,CAClBrB,KAAM4B,KAAK6B,OAAOE,MAAM3D,KACxBH,MAAO+B,KAAK6B,OAAOE,MAAM9D,OAE3B+B,KAAKgC,iB,QC3JT,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://nodecourse/./src/views/front/PersonalWallView.vue","webpack://nodecourse/./src/views/front/PersonalWallView.vue?c6c5"],"sourcesContent":["<template>\r\n  <div class=\"header header-rounded d-flex mb-5\">\r\n    <img\r\n      :src=\"personalInfo.photo\"\r\n      class=\"headerThumbnail\"\r\n      v-if=\"personalInfo.photo\"\r\n    />\r\n    <img\r\n      src=\"../../assets/images/user_default.png\"\r\n      class=\"headerThumbnail\"\r\n      v-else\r\n    />\r\n    <div class=\"headerContent\">\r\n      <h2 class=\"text-start h5 fw-bold me-auto\">\r\n        <span>{{ personalInfo.name }}</span>\r\n        <span class=\"d-block d-sm-block\">的貼文牆</span>\r\n      </h2>\r\n      <div v-if=\"personalId !== profile._id\">\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn btn-warning py-2 px-6 px-sm-8 border-dark fw-bold shadow\"\r\n          @click.prevent=\"toggleFollow(personalId, 'createFollow')\"\r\n          v-if=\"!isFollow\"\r\n        >\r\n          追蹤\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn btn-secondary py-2 px-4 px-sm-8 border-dark fw-bold shadow\"\r\n          @click.prevent=\"toggleFollow(personalId, 'delFollow')\"\r\n          v-else\r\n        >\r\n          取消追蹤\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"row g-3 mb-4\">\r\n    <div class=\"col-12 col-md-4\">\r\n      <select\r\n        class=\"form-select form-select-sm\"\r\n        v-model=\"sort\"\r\n        @change=\"getUserPosts()\"\r\n      >\r\n        <option value=\"desc\">由新到舊</option>\r\n        <option value=\"asc\">由舊到新</option>\r\n      </select>\r\n    </div>\r\n    <div class=\"col-12 col-md-8\">\r\n      <div class=\"input-group input-group-sm\">\r\n        <input\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          placeholder=\"搜尋貼文\"\r\n          aria-label=\"search\"\r\n          aria-describedby=\"search\"\r\n          v-model.trim=\"keyword\"\r\n        />\r\n        <button\r\n          class=\"effectBtn btn btn-primary py-0 px-3\"\r\n          type=\"button\"\r\n          id=\"search\"\r\n          @click.prevent=\"getUserPosts()\"\r\n        >\r\n          <i class=\"bi bi-search h3\"></i>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <ArticleComponent\r\n    :data=\"posts\"\r\n    @get-data=\"getUserPosts\"\r\n    v-if=\"posts?.length\"\r\n  ></ArticleComponent>\r\n\r\n  <EmptyCardComponent v-else>\r\n    <template #default>目前尚無動態，趕快叫他新增貼文吧！</template>\r\n  </EmptyCardComponent>\r\n</template>\r\n\r\n<script>\r\nimport ArticleComponent from \"@/components/ArticleComponent.vue\";\r\nimport EmptyCardComponent from \"@/components/EmptyCardComponent.vue\";\r\nimport { mapState, mapActions } from \"pinia\";\r\nimport statusStore from \"@/stores/statusStore\";\r\nimport userStore from \"@/stores/userStore\";\r\nimport { apiGetUserPosts } from \"@/scripts/api\";\r\n\r\nexport default {\r\n  name: \"DynamicWallView\",\r\n  data() {\r\n    return {\r\n      personalId: \"\",\r\n      personalInfo: {},\r\n      keyword: \"\",\r\n      sort: \"desc\",\r\n      posts: [],\r\n    };\r\n  },\r\n  methods: {\r\n    // 取得貼文資料\r\n    async getUserPosts() {\r\n      let tempData = {\r\n        // 排序順序 1 新到舊 asc 舊到新\r\n        sort: this.sort,\r\n        // 關鍵字篩選 若沒有則返回所有貼文\r\n        keyword: this.keyword,\r\n      };\r\n\r\n      this.toggleLoading(true);\r\n\r\n      apiGetUserPosts(tempData, this.personalId)\r\n        .then((res) => {\r\n          this.posts = res.data.data;\r\n          this.toggleLoading(false);\r\n        })\r\n        .catch((err) => {\r\n          this.toggleLoading(false);\r\n          this.pushMessage({\r\n            style: \"danger\",\r\n            content: err.response?.data?.message || \"取得貼文失敗\",\r\n          });\r\n        });\r\n    },\r\n    // 切換追蹤狀態\r\n    async toggleFollow(id, toggleType) {\r\n      this.toggleLoading(true);\r\n      await this[toggleType](id);\r\n      this.getProfile();\r\n    },\r\n    ...mapActions(statusStore, [\"toggleLoading\"]),\r\n    ...mapActions(userStore, [\"getProfile\", \"createFollow\", \"delFollow\"]),\r\n  },\r\n  computed: {\r\n    // 判斷是否追蹤\r\n    isFollow() {\r\n      let val = false;\r\n      const data = this.profile?.following || [];\r\n      data.forEach((item) => {\r\n        if (item.user == this.personalId) {\r\n          val = true;\r\n        }\r\n      });\r\n      return val;\r\n    },\r\n    ...mapState(userStore, [\"profile\"]),\r\n  },\r\n  components: {\r\n    ArticleComponent,\r\n    EmptyCardComponent,\r\n  },\r\n  async created() {\r\n    // 取得 personalWall 用戶資料\r\n    this.personalId = this.$route.params.id;\r\n    this.personalInfo = {\r\n      name: this.$route.query.name,\r\n      photo: this.$route.query.photo,\r\n    };\r\n    this.getUserPosts();\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./PersonalWallView.vue?vue&type=template&id=7ff03792\"\nimport script from \"./PersonalWallView.vue?vue&type=script&lang=js\"\nexport * from \"./PersonalWallView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Node.js 直播班\\\\主線任務\\\\第八週主線\\\\nodeCourse_W8_Front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","src","_imports_0","_createElementVNode","value","_hoisted_10","_hoisted_11","_hoisted_15","$data","photo","_createElementBlock","_toDisplayString","name","_hoisted_6","_ctx","_id","_hoisted_7","$options","type","onClick","$event","onChange","placeholder","id","length","_createBlock","_component_ArticleComponent","data","onGetData","_component_EmptyCardComponent","key","default","personalId","personalInfo","keyword","sort","posts","methods","async","tempData","this","toggleLoading","apiGetUserPosts","then","res","catch","err","pushMessage","style","content","response","message","toggleType","getProfile","mapActions","statusStore","userStore","computed","isFollow","val","profile","following","forEach","item","user","mapState","components","ArticleComponent","EmptyCardComponent","$route","params","query","getUserPosts","__exports__","render"],"sourceRoot":""}