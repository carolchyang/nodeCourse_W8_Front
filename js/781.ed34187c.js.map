{"version":3,"file":"js/781.ed34187c.js","mappings":"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","sources":["webpack://nodecourse/./src/scripts/api.js","webpack://nodecourse/./src/stores/postStore.js","webpack://nodecourse/./src/views/front/CreatePostView.vue","webpack://nodecourse/./src/views/front/CreatePostView.vue?303a"],"sourcesContent":["import axios from \"axios\";\n\nconst api = process.env.VUE_APP_API;\n\n// Users\nexport const apiUserSignUp = (data) => axios.post(`${api}/user/sign_up`, data);\nexport const apiUserSignIn = (data) => axios.post(`${api}/user/sign_in`, data);\nexport const apiUpdatePassword = (data) =>\n  axios.post(`${api}/user/updatePassword`, data);\nexport const apiGetProfile = () => axios.get(`${api}/user/profile`);\nexport const apiUpdateProfile = (data) =>\n  axios.patch(`${api}/user/profile`, data);\nexport const apiGetLikeList = () => axios.get(`${api}/user/getLikeList`);\nexport const apiCreateFollow = (id) => axios.post(`${api}/user/${id}/follow`);\nexport const apiDelFollow = (id) => axios.delete(`${api}/user/${id}/follow`);\nexport const apiGetFollowingList = () =>\n  axios.get(`${api}/user/getFollowingList`);\n\n// Post\nexport const apiGetPosts = (data) =>\n  axios.get(`${api}/posts`, { params: data });\nexport const apiGetUserPosts = (data, id) =>\n  axios.get(`${api}/posts/user/${id}`, { params: data });\nexport const apiGetPost = (id) => axios.get(`${api}/post/${id}`);\nexport const apiCreatePost = (data) => axios.post(`${api}/post`, data);\nexport const apiDelPost = (id) => axios.delete(`${api}/post/${id}`);\nexport const apiCreateLike = (id) => axios.post(`${api}/post/${id}/like`);\nexport const apiDelLike = (id) => axios.delete(`${api}/post/${id}/like`);\nexport const apiCreateComment = (data, postId) =>\n  axios.post(`${api}/post/${postId}/comment`, data);\nexport const apiDelComment = (commentId) =>\n  axios.delete(`${api}/post/${commentId}/comment`);\n\n// UpLoad\nexport const apiUpLoad = (data, type) =>\n  axios.post(`${api}/upload?type=${type}`, data);\n","import { defineStore } from \"pinia\";\nimport { apiUpLoad, apiCreateLike, apiDelLike } from \"@/scripts/api\";\nimport statusStore from \"./statusStore\";\n\nconst status = statusStore();\n\nexport default defineStore(\"postStore\", {\n  state: () => {\n    return {\n      tempImage: {\n        msg: \"\",\n        url: \"\",\n      },\n    };\n  },\n  actions: {\n    // 上傳圖片\n    async upload(data, type = \"\") {\n      status.isLoading = true;\n      await apiUpLoad(data, type)\n        .then((res) => {\n          this.tempImage = {\n            msg: \"\",\n            url: res.data.data,\n          };\n          status.isLoading = false;\n        })\n        .catch((err) => {\n          this.tempImage = {\n            msg: err.response?.data?.message || \"上傳圖片失敗\",\n            url: \"\",\n          };\n          status.isLoading = false;\n        });\n    },\n    // 按讚\n    async createLike(id) {\n      await apiCreateLike(id)\n        .then(() => {\n          status.pushMessage({\n            style: \"dark\",\n            content: \"已按讚\",\n          });\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content: err.response?.data?.message || \"按讚失敗\",\n          });\n        });\n    },\n    // 取消按讚\n    async delLike(id) {\n      await apiDelLike(id)\n        .then(() => {\n          status.pushMessage({\n            style: \"dark\",\n            content: \"取消按讚成功\",\n          });\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content: err.response?.data?.message || \"取消按讚失敗\",\n          });\n        });\n    },\n  },\n});\n","<template>\r\n  <h1 class=\"header\">張貼動態</h1>\r\n\r\n  <VForm\r\n    v-slot=\"{ errors, meta }\"\r\n    class=\"card p-md-8\"\r\n    id=\"form\"\r\n    @submit=\"createPost\"\r\n    ref=\"postForm\"\r\n  >\r\n    <div class=\"mb-4\">\r\n      <label for=\"content\" class=\"form-label\">貼文內容</label>\r\n      <VField\r\n        type=\"text\"\r\n        id=\"content\"\r\n        placeholder=\"輸入您的貼文內容\"\r\n        name=\"貼文內容\"\r\n        class=\"form-control\"\r\n        :class=\"{ 'is-invalid': errors['貼文內容'] }\"\r\n        rows=\"5\"\r\n        rules=\"required|max:200\"\r\n        v-model=\"tempPost.content\"\r\n        as=\"textarea\"\r\n      ></VField>\r\n      <error-message\r\n        name=\"貼文內容\"\r\n        class=\"invalid-feedback text-danger\"\r\n      ></error-message>\r\n    </div>\r\n\r\n    <div class=\"fileBtn mb-4\" :class=\"{ 'mb-8': tempPost.image == '' }\">\r\n      <label for=\"image\" class=\"rounded-1\">上傳圖片</label>\r\n      <input\r\n        type=\"file\"\r\n        accept=\"image/*\"\r\n        id=\"image\"\r\n        name=\"image\"\r\n        @change=\"uploadImage\"\r\n      />\r\n      <small class=\"ms-4 text-danger\">{{ imageMsg }}</small>\r\n    </div>\r\n    <div\r\n      class=\"bgCover position-relative mb-8\"\r\n      :style=\"{ backgroundImage: 'url(' + tempPost.image + ')' }\"\r\n      v-if=\"tempPost.image\"\r\n    >\r\n      <a href=\"#\" class=\"cardCloseBtn\" @click.prevent=\"resetImage\">\r\n        <i class=\"bi bi-x-lg\"></i>\r\n      </a>\r\n    </div>\r\n\r\n    <div class=\"text-center\">\r\n      <button\r\n        type=\"submit\"\r\n        class=\"effectBtn btn btn-primary w-100\"\r\n        :disabled=\"!meta.valid\"\r\n      >\r\n        送出貼文\r\n      </button>\r\n    </div>\r\n  </VForm>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from \"pinia\";\r\nimport statusStore from \"@/stores/statusStore\";\r\nimport postStore from \"@/stores/postStore\";\r\nimport { apiCreatePost } from \"@/scripts/api\";\r\n\r\nexport default {\r\n  name: \"CreatePostView\",\r\n  data() {\r\n    return {\r\n      // 圖片錯誤訊息\r\n      imageMsg: \"\",\r\n      // 暫存資料\r\n      tempPost: {\r\n        content: \"\",\r\n        image: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    // 建立貼文\r\n    createPost() {\r\n      this.toggleLoading(true);\r\n      apiCreatePost(this.tempPost)\r\n        .then(() => {\r\n          this.toggleLoading(false);\r\n          this.pushMessage({\r\n            style: \"dark\",\r\n            content: \"已建立貼文\",\r\n          });\r\n          this.$router.push(\"/\");\r\n        })\r\n        .catch((err) => {\r\n          this.toggleLoading(false);\r\n          this.pushMessage({\r\n            style: \"danger\",\r\n            content: err.response?.data?.message || \"建立貼文失敗\",\r\n          });\r\n        });\r\n    },\r\n    async uploadImage() {\r\n      const formData = new FormData(document.getElementById(\"form\"));\r\n      await this.upload(formData);\r\n      this.tempPost.image = this.tempImage.url;\r\n      this.imageMsg = this.tempImage.msg;\r\n    },\r\n    // 清空圖片\r\n    resetImage() {\r\n      // 清空圖片 input 必免傳同樣圖片時出錯\r\n      document.getElementById(\"image\").value = \"\";\r\n      this.tempPost.image = \"\";\r\n      this.imageMsg = \"\";\r\n    },\r\n    ...mapActions(statusStore, [\"toggleLoading\", \"pushMessage\"]),\r\n    ...mapActions(postStore, [\"upload\"]),\r\n  },\r\n  computed: {\r\n    ...mapState(postStore, [\"tempImage\"]),\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.cardCloseBtn {\r\n  color: red;\r\n  font-size: 1.5rem;\r\n  &:hover {\r\n    transform: scale(1.25);\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./CreatePostView.vue?vue&type=template&id=8298cc0c&scoped=true\"\nimport script from \"./CreatePostView.vue?vue&type=script&lang=js\"\nexport * from \"./CreatePostView.vue?vue&type=script&lang=js\"\n\nimport \"./CreatePostView.vue?vue&type=style&index=0&id=8298cc0c&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Node.js 直播班\\\\主線任務\\\\第八週主線\\\\nodeCourse_W8_Front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8298cc0c\"]])\n\nexport default __exports__"],"names":["api","process","apiUserSignUp","data","axios","apiUserSignIn","apiUpdatePassword","apiGetProfile","apiUpdateProfile","apiGetLikeList","apiCreateFollow","id","apiDelFollow","apiGetFollowingList","apiGetPosts","params","apiGetUserPosts","apiGetPost","apiCreatePost","apiDelPost","apiCreateLike","apiDelLike","apiCreateComment","postId","apiDelComment","commentId","apiUpLoad","type","status","statusStore","defineStore","state","tempImage","msg","url","actions","async","isLoading","then","res","this","catch","err","response","message","pushMessage","style","content","_createElementVNode","class","for","_hoisted_6","_hoisted_1","_createVNode","_component_VForm","onSubmit","$options","ref","errors","meta","_hoisted_3","_component_VField","placeholder","name","rows","rules","$data","$event","as","_component_error_message","image","_hoisted_4","accept","onChange","_toDisplayString","_createElementBlock","backgroundImage","href","onClick","disabled","valid","_hoisted_9","imageMsg","tempPost","methods","createPost","toggleLoading","$router","push","formData","FormData","document","getElementById","upload","resetImage","value","mapActions","postStore","computed","mapState","__exports__","render"],"sourceRoot":""}