"use strict";(self["webpackChunknodecourse"]=self["webpackChunknodecourse"]||[]).push([[509],{6343:function(e,o,t){t.r(o),t.d(o,{default:function(){return E}});var s=t(3396),n=t(7139),l=t(9242),a=t(2893);const r={class:"header header-rounded d-flex mb-5"},i=["src"],d={key:1,src:a,class:"headerThumbnail"},c={class:"headerContent"},p={class:"text-start h5 fw-bold me-auto"},h=(0,s._)("span",{class:"d-block d-sm-block"},"的貼文牆",-1),u={key:0},g={class:"row g-3 mb-4"},m={class:"col-12 col-md-4"},w=(0,s._)("option",{value:"desc"},"由新到舊",-1),y=(0,s._)("option",{value:"asc"},"由舊到新",-1),b=[w,y],f={class:"col-12 col-md-8"},k={class:"input-group input-group-sm"},v=(0,s._)("i",{class:"bi bi-search h3"},null,-1),_=[v],C=(0,s.Uk)("目前尚無動態，趕快叫他新增貼文吧！");function I(e,o,t,a,w,y){const v=(0,s.up)("ArticleComponent"),I=(0,s.up)("EmptyCardComponent");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",r,[w.personalInfo.photo?((0,s.wg)(),(0,s.iD)("img",{key:0,src:w.personalInfo.photo,class:"headerThumbnail"},null,8,i)):((0,s.wg)(),(0,s.iD)("img",d)),(0,s._)("div",c,[(0,s._)("h2",p,[(0,s._)("span",null,(0,n.zw)(w.personalInfo.name),1),h]),w.personalId!==e.profile._id?((0,s.wg)(),(0,s.iD)("div",u,[y.isFollow?((0,s.wg)(),(0,s.iD)("button",{key:1,type:"button",class:"btn btn-secondary py-2 px-4 px-sm-8 border-dark fw-bold shadow",onClick:o[1]||(o[1]=(0,l.iM)((e=>y.toggleFollow(w.personalId,"delFollow")),["prevent"]))}," 取消追蹤 ")):((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:"btn btn-warning py-2 px-6 px-sm-8 border-dark fw-bold shadow",onClick:o[0]||(o[0]=(0,l.iM)((e=>y.toggleFollow(w.personalId,"createFollow")),["prevent"]))}," 追蹤 "))])):(0,s.kq)("",!0)])]),(0,s._)("div",g,[(0,s._)("div",m,[(0,s.wy)((0,s._)("select",{class:"form-select form-select-sm","onUpdate:modelValue":o[2]||(o[2]=e=>w.sort=e),onChange:o[3]||(o[3]=e=>y.getUserPosts())},b,544),[[l.bM,w.sort]])]),(0,s._)("div",f,[(0,s._)("div",k,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"搜尋貼文","aria-label":"search","aria-describedby":"search","onUpdate:modelValue":o[4]||(o[4]=e=>w.keyword=e)},null,512),[[l.nr,w.keyword,void 0,{trim:!0}]]),(0,s._)("button",{class:"effectBtn btn btn-primary py-0 px-3",type:"button",id:"search",onClick:o[5]||(o[5]=(0,l.iM)((e=>y.getUserPosts()),["prevent"]))},_)])])]),w.posts?.length?((0,s.wg)(),(0,s.j4)(v,{key:0,data:w.posts,onGetData:y.getUserPosts},null,8,["data","onGetData"])):((0,s.wg)(),(0,s.j4)(I,{key:1},{default:(0,s.w5)((()=>[C])),_:1}))],64)}var D=t(5627),F=t(7729),x=t(3766),U=t(6294),P=t(4331),Z=t(1885),L={name:"DynamicWallView",data(){return{personalId:"",personalInfo:{},keyword:"",sort:"desc",posts:[]}},methods:{async getUserPosts(){let e={sort:this.sort,keyword:this.keyword};this.toggleLoading(!0),(0,Z.mh)(e,this.personalId).then((e=>{this.posts=e.data.data,this.toggleLoading(!1)})).catch((e=>{this.toggleLoading(!1),this.pushMessage({style:"danger",content:e.response?.data?.message||"取得貼文失敗"})}))},async toggleFollow(e,o){this.toggleLoading(!0),await this[o](e),this.getProfile()},...(0,x.nv)(U.Z,["toggleLoading"]),...(0,x.nv)(P.Z,["getProfile","createFollow","delFollow"])},computed:{isFollow(){let e=!1;const o=this.profile?.following||[];return o.forEach((o=>{o.user==this.personalId&&(e=!0)})),e},...(0,x.rn)(P.Z,["profile"])},components:{ArticleComponent:D.Z,EmptyCardComponent:F.Z},async created(){this.personalId=this.$route.params.id,this.personalInfo={name:this.$route.query.name,photo:this.$route.query.photo},this.getUserPosts()}},M=t(89);const q=(0,M.Z)(L,[["render",I]]);var E=q}}]);
//# sourceMappingURL=509.3122f010.js.map